<div
  class="product-form__input product-form__quantity{% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_vertical_offset < 0 %} product-form__quantity-top{% endif %}"
>
  {% comment %} TODO: enable theme-check once `item_count_for_variant` is accepted as valid filter {% endcomment %}
  {% # theme-check-disable %}
  {%- assign cart_qty = cart | item_count_for_variant: variant.id -%}

  {% # theme-check-enable %}

  <div class="products-quantity-container">
    <quantity-input class="quantity" data-url="{{ variant.url }}" data-section="{{ section.id }}">
      <button class="quantity__button quantity__minus no-js-hidden" name="minus" type="button" data-handle="{{ variant.handle }}">
        <span class="visually-hidden">
          {{- 'products.product.quantity.decrease' | t: product: variant.title | escape -}}
        </span>
        <span class="svg-wrapper">
          {{- 'icon-minus.svg' | inline_asset_content -}}
        </span>
      </button>
      <input
        class="quantity__input bundle-products{% if disabled %} unavailable disabled{% endif %}"
        type="number"
        name="quantity-{{ index }}"
        id="Quantity-variant-{{ index }}"
        data-cart-quantity="{{ cart_qty }}"
        data-min="0"
        min="0"
        data-max="{% if variant.inventory_policy == 'deny' %}{{ variant.quantity_rule.max | default: variant.inventory_quantity }}{% endif %}"
        max="{% if variant.inventory_policy == 'deny' %}{{ variant.quantity_rule.max | default: variant.inventory_quantity }}{% endif %}"
        step="1"
        value="0"
        data-id="{{ variant.variants[0].id }}"
        data-title="{{ variant.title }}"
        data-price="{{ variant.price }}"
        disabled
      />
      <button class="quantity__button quantity__plus no-js-hidden{% if disabled %} unavailable disabled{% endif %}" name="plus" type="button" {% if option_disabled %}disabled{% endif %} data-handle="{{ variant.handle }}">
        <span class="visually-hidden">
          {{- 'products.product.quantity.increase' | t: product: variant.title | escape -}}
        </span>
        <span class="svg-wrapper">
          {{- 'icon-plus.svg' | inline_asset_content -}}
        </span>
      </button>
    </quantity-input>
  </div>
</div>
